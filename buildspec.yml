version: 0.2

phases:
  build:
    commands:
      - |
          aws cloudformation package \
           --template-file template.yml \
           --output-template output.yml \
           --s3-bucket sam-todo-python \
           --s3-prefix %CODEBUILD_SOURCE_VERSION%
  post_build:
      commands:
        - |
            aws cloudformation deploy \
             --capabilities CAPABILITY_IAM \
             --template-file output.yml \
             --stack-name TodoPythonSAM \
             --region %AWS_REGION%


